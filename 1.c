涓€锛�
1.鍦ㄩ」鐩腑娣诲姞com.tedu鍖�
2.鍦ㄨ椤圭洰涓坊鍔燱ebServer绫伙紝骞跺畾涔夊熀鏈粨鏋�
3.
4.瀹炵幇涓庡鎴风锛堟祻瑙堝櫒锛夌殑杩炴帴锛屼娇鐢⊿erverSocket

浜岋細
1.娴忚鍣ㄥ湪杩炴帴鏈嶅姟鍣ㄥ悗锛屼細鍙戦€丠TTP璇锋眰鏁版嵁杩囨潵
2.鍦–lientHandler涓紝閫氳繃Socket鑾峰彇杈撳嚭娴侊紝鐒跺悗
3.瀹㈡埛绔彂閫佽繃鏉ョ殑HTTP璇锋眰骞惰緭鍑哄埌鎺у埗鍙版煡鐪嬪唴瀹广€�

鏈増鏈姹傜啛鎮塇TTP鍗忚涓姹傜殑鏍煎紡涓庤鍒�


涓夛細
1.鍦╟om.tedu鍖呬腑寤虹珛涓€涓瓙鍖卙ttp锛屽湪璇ュ寘涓畾涔塰ttpRequest绫绘潵淇濆瓨涓€涓鎴风鍙戦€佽繃鏉ョ殑HTTP璇锋眰鍐呭

2.瀹屾垚HttpRequest鐨勮В鏋愯姹傝鐨勫伐浣�
鍥涳細
瀹屾垚鐩稿簲瀹㈡埛绔〉闈㈢殑宸ヤ綔

1.鍦ㄩ」鐩洰褰曚笅鏂板缓涓€涓洰褰晈ebapps鐢ㄦ潵瀛樻斁鎵€鏈夎祫婧�
2.鍦╳ebapps涓嬫柊寤轰竴涓瓙鐩綍myweb锛岀敤鏉ュ瓨鏀炬祴璇曢〉闈�

3.鍦–lientHandler涓€氳繃HttpRequest鑾峰彇瀹㈡埛绔璇锋眰鐨勮祫婧愶紝骞跺皢璇ヨ祫婧愬搷搴旂粰瀹㈡埛绔�

杩欎竴姝ラ渶瑕佹帉鎻TTP鍗忚涓殑鍝嶅簲鏍煎紡

灏唚ebapps鐩綍浣滀负鎵€鏈夎祫婧愮洰褰曠殑鏍�

姣斿瀹㈡埛绔湪鍦板潃鏍忚緭鍏ョ殑鍦板潃涓猴細
http锛�//localhost锛�8080/myweb/index.html

閭ｄ箞request閲岃姹傝涓璾rl閮ㄥ垎涓猴細 /myweb/index.html
瀵瑰簲鐨勪粠webapps鐩綍寮€濮嬫煡鎵撅紝鍗筹細
webapps/myweb/index.html

http: //localhost:8080/index.html
瀵瑰簲锛�
webapps/index.html


浜旓細
閲嶆瀯浠ｇ爜锛�
鍦╤ttp鍖呬腑瀹氫箟浜嗕竴涓柊鐨勭被锛欻ttpResponse锛岃〃绀轰竴涓叿浣撶殑鍝嶅簲

閲嶆瀯ClientHandler浠ｇ爜锛屽皢鍝嶅簲鐨勫叿浣撶粏鑺傜Щ鍔ㄨ嚦HttpResponse涓畬鎴愩€侰lientHandler鍙礋璐�
灏嗗搷搴斾俊鎭缃埌HttpResponse涓嵆鍙€�

鍏細
鍦℉ttpRequest涓坊鍔犺В鏋愭秷鎭ご鐨勫姛鑳�
1.瀹氫箟涓€涓狹ap灞炴€э紝鐢ㄤ簬瀛樻斁鎵€鏈夌殑娑堟伅澶达細headers
2.瀹氫箟涓€涓敤鏉ヨВ鏋愯姹備腑娑堟伅澶寸殑鏂规硶锛屽苟灏嗘瘡涓秷鎭ご淇℃伅瀛樺叆鍒板睘鎬earders涓�







涓冿細
鏂板缓涓€涓寘context锛屽湪鍖呬腑瀹氫箟涓€涓被锛欻ttpContent
HttpContent璁板綍鐩稿叧Http鍗忚鐨勫唴瀹�




鍏細
鏂板缓涓€涓寘context锛屽湪鍖呬腑瀹氫箟涓€涓被锛欻ttpContent
HttpContent璁板綍鐩稿叧Http鍗忚鐨勫唴瀹�

鍦℉TTP鍗忚涓紝涓嶅悓鐨勪粙璐ㄧ被鍨嬫湁涓嶅悓鐨勫畾涔夛紝鏃犺鏄姹傝繕鏄搷搴斾腑锛�
甯稿父浼氭湁涓€涓ご锛欳ontent-Type锛岃繖涓ご灏辨槸瀵瑰簲浠嬭川绫诲瀷鐨�

渚嬪锛氬鎴风璇锋眰涓€涓獂xx.html椤甸潰锛岄偅涔堟湇鍔＄鍦ㄥ搷搴旇椤甸潰鏃跺洖澶嶇殑鍝嶅簲澶翠腑Content-Type鐨勫€煎簲璇�
瀵瑰簲锛歵ext/html銆� 鑻ュ鎴风璇锋眰鐨勬槸涓€寮犲浘鐗囧xxx.png鏃讹紝閭ｄ箞鍝嶅簲璇ュ浘鐗囨椂瀵瑰簲鐨勫搷搴斿ご涓瑿ontent-Type
鐨勫€煎氨搴斿綋涓猴細image/png銆� 涓嶅悓鐨勪粙璐ㄧ被鍨嬮兘鏈変笉鍚屽搴旂殑鍊笺€�

甯歌鐨勪粙璐ㄧ被鍨嬶細
html锛歵ext/html                 闈欐€侀〉闈�
css锛歵ext/css	                鏍峰紡鏂囦欢
png锛歩mage/png	                png鍥剧墖
jpg:image/jpg                   jpg鍥剧墖
js:application/javascript       js鑴氭湰鏂囦欢


涔濓細
Http鍗忚璇存槑浜嗕竴涓簨鎯咃紝瀹㈡埛绔彂閫佽姹傛椂鍏佽绌鸿姹傦紝鍗冲鎴风鍦ㄨ繛鎺ュ悗鍙戦€佷竴涓爣鍑嗙殑HTTP璇锋眰鍐呭

瑙ｅ喅鍔炴硶锛�
鍦╤ttp鍖呬腑瀹氫箟涓€涓紓甯革細EmptyRequest锛岃〃绀轰竴涓┖璇锋眰褰撳垱寤篐ttpRequestException鏃讹紝鑻ュ彂鐜版槸绌鸿姹傦紝鍒欐姏鍑鸿繖涓紓甯�
ClientHandler澶勭悊璇ュ紓甯告潵瑙ｅ喅绌鸿姹傞棶棰�









鍗侊細
瀹屾垚娉ㄥ唽鍔熻兘

1.鍦╳ebapps/mywab/鐩綍涓坊鍔犱竴涓敞鍐岄〉闈eg.html
2.鍦╤ttpRequest涓В鏋愯姹備腑娣诲姞瀵归〉闈㈣〃鍗曟暟鎹殑瑙ｆ瀽
    褰撳鎴风鍙戦€佽姹傛椂锛屽湪URL璺緞涓彲鑳戒細鎼哄甫涓€浜涘弬鏁颁紶閫�
    鎵€浠ュ湪瑙ｆ瀽璇锋眰鏃惰瀵箄rl鍋氭洿璇︾粏鐨勮В鏋愬伐浣�
    渚嬪锛歨ttp://localhost:8080/myweb/reg?username=%E4%BD%A0%E5%A5%BD&password=223355&nickname=hello&phonenumber=123456789
	Http鍗忚涓瀹氬鎴风鍙互鍦ㄥ湴鍧€鏍忎腑鍙戦€佸湴鍧€鏃堕檮甯﹀弬鏁�
	鏍煎紡锛�
	http锛�//host锛焣uery
	锛熺敤鏉ュ垎鍓茶姹傝矾寰勪笌鍙傛暟
	鍙傛暟鍙互鏈夎嫢骞蹭釜锛屾瘡涓弬鏁颁箣闂翠娇鐢ㄢ€�&鈥濆垎鍓诧紝鑰屾瘡涓弬鏁拌嚜韬殑鏍煎紡涓簄ame=value
	
	涓烘锛屽湪HttpRequest瑙ｆ瀽璇锋眰琛屾椂锛屽url閮ㄥ垎鐨勮В鏋愯閲嶆瀯锛屽垎鏋愯繖涓湴鍧€鏄惁鍚湁鍙傛暟锛�
	鑻ユ湁瑕佸皢鎵€鏈夊弬鏁拌В鏋愬嚭鏉ュ崟鐙繚瀛樸€傚苟鍦℉ttpRequest涓彁渚涜幏鍙栫浉搴斾俊鎭殑鏂规硶
	
	getRequestURI锛堬級锛氳幏鍙栬矾寰勪腑璇锋眰璧勬簮鐨勯儴鍒嗭紙锛熷墠闈㈢殑鍐呭锛�
	getParanmeter(String name): 鑾峰彇鎸囧畾鍙傛暟鍚嶅搴旂殑鍊�
	
	URI  涓嶅甫鍗忚 
	URL  甯﹀崗璁�













鍗佷竴锛�
瀹屾垚娉ㄥ唽鍔熻兘  缁х画锛�

鍦–lientHandler涓requestURI杩涜鍒嗘敮鍒ゆ柇锛岃嫢鏄姹傚姛鑳斤紝鍒欏畬鎴愭敞鍐屽姛鑳界殑涓氬姟锛屽惁鍒欏啀灏嗚姹傚綋浣滆姹傝祫婧愬鐞�


娉ㄥ唽涓氬姟锛�
1.浠巖equest涓幏鍙栫敤鎴烽〉闈㈣〃鍗曚腑鎻愪氦杩囨潵鐨勮鐢ㄦ埛娉ㄥ唽淇℃伅
2.灏嗚鐢ㄦ埛鐨勬敞鍐屼俊鎭啓鍏ユ枃浠秛ser.dat涓�
3.鍝嶅簲娉ㄥ唽鎴愬姛缁欑敤鎴�

uesr.dat鏄竴涓簩杩涘埗鏂囦欢锛�
姣忔潯璁板綍锛歶sername锛宲assword锛宯ickname锛宲honenumber鍏卞崰鐢�116涓瓧鑺�

username锛宲assword锛宯ickname鍚勫崰32涓瓧鑺傦紝phonenumber鍗�20涓瓧鑺�

RandomAccessFile
















鍗佷簩锛�
閲嶆瀯浠ｇ爜锛�

灏嗘敞鍐屽姛鑳藉崟鐙畾涔夊埌涓€涓被涓畬鎴�

鏂板缓涓€涓寘servlet
鍦ㄨ繖涓寘涓畾涔変竴涓被RegServlet锛岀敤杩欎釜绫绘潵瀹屾垚娉ㄥ唽涓氬姟銆�
ClientHandler鍦ㄥ垎鏋愬鎴风璇锋眰鐨勬槸娉ㄥ唽涓氬姟鏃讹紝鍒欒皟鐢≧egServlet鏉ュ畬鎴愬鐞嗛€昏緫








鍗佷笁锛�
鍦ㄩ」鐩腑娣诲姞涓€涓柊鐨勭洰褰曪細conf
鍦ㄧ洰褰曚腑娣诲姞鏂囦欢web.xml(婧愯嚜tomcat涓�)

鍦℉ttpContext鍒濆鍖杋nit鏂规硶涓璵tea鏄犲皠鏀逛负浣跨敤web.xml鏂囨。涓殑鎵€鏈夋暟鎹�

閫氳繃DOM瑙ｆ瀽web.xml鏂囨。灏嗘牴鏍囩<webapp>涓嬫墍鏈夊悕瀛椾负锛�
<mime-mapping>鐨勫瓙鏍囩瑙ｆ瀽鍑烘潵锛屽叾涓�<mime-mapping>杩樺寘鍚簡涓や釜瀛愭爣绛撅細濡傦細
 <mime-mapping>
        <extension>asx</extension>
        <mime-type>video/x-ms-asf</mime-type>
  </mime-mapping>
    
灏嗗瓙鏍囩<extension>涓殑鏂囨湰浣滀负key锛屽皢瀛愭爣绛�<mime-type>涓殑鏂囨湰浣滀负value瀛樺叆HttpContext鐨勫睘鎬imeTypeMapping涓€�

















鍗佸洓锛�
閲嶆瀯浠ｇ爜

1.鐢变簬RegServlet鍜孡oginServlet閮界敤鏉ュ鐞嗕笟鍔￠€昏緫锛屽苟涓旈兘浼氬仛璺宠浆椤甸潰鎿嶄綔锛屾墍浠ュ畾涔変竴涓秴绫籋ttpServlet鏉ュ畾涔�
 鎵€鏈塖ervlet鐨勫叡鎬с€�
 
 HttpServlet涓畾涔夋柟娉曪細service鐢ㄦ潵瑙勫畾鎵€鏈塖ervlet浣跨敤姝ゆ柟娉曞鐞嗕笟鍔￠€昏緫
 鍐嶅畾涔夋柟娉曪細forward鐢ㄦ潵璁╂墍鏈塖ervlet鍋氶〉闈㈣烦杞搷浣�
 涔嬪悗璁㏑egServlet鍜孡oginServlet缁ф壙HttpServlet




鍗佷簲锛�
閲嶆瀯浠ｇ爜

鎷嗗垎涓氬姟锛�
浠egServlet涓轰緥锛岀幇鍦ㄥ畠闇€瑕佽幏鍙栬幏鍙栫敤鎴凤紝鐒跺悗璇诲彇user.dat鏂囦欢鏁版嵁锛屽垽鏂敤鎴锋槸鍚﹀瓨鍦ㄦ潵鍐冲畾鏄惁鍐欏叆user.dat鏂囦欢涓€鏉�
鏂版暟鎹紝鍐嶅搷搴斿鎴风鐩稿簲鐨勯〉闈�
杩欒繚鑳岄珮鍐呰仛锛屼綆鑰﹀悎鍘熷垯涓殑楂樺唴鑱氾紙涓氬姟涓嶅彲鍐嶆媶鍒嗭級锛屼笉鍒╀簬鍚庢湡椤圭洰缁存姢鍜屾墿灞�

灏嗗鐞嗕笟鍔″垎涓轰袱涓眰娆★細涓氬姟灞傦紝鏁版嵁鎸佷箙灞�
涓氬姟灞傦細澶勪簬杩欎釜灞備腑鐨勭被璐熻矗澶勭悊鐢ㄦ埛璇锋眰鐨勫叿浣撲笟鍔�
鏁版嵁鎸佷箙灞傦細澶勪簬杩欎釜灞傛涓殑绫昏礋璐ｄ笟鍔″眰闇€瑕佺殑鏁版嵁鐨勫瓨鍙栧伐浣�

杩欐牱鍦ㄥ畬鎴愪竴涓笟鍔℃祦绋嬫椂锛屼笟鍔＄被闇€瑕佹暟鎹椂鏃犻渶鑷璇诲啓鏁版嵁鑰屾槸涓庢暟鎹寔涔呭眰涓殑绫诲崗浣滃畬鎴愩€�

瀹屾垚缁冧範淇敼鐢ㄦ埛涓氬姟锛�

1.鍦╳ebapps/myweb/涓坊鍔犱慨鏀归〉闈pdate.html,form琛ㄥ崟涓璦ction="update"

鍐嶆坊鍔犱袱涓〉闈紝鍒嗗埆琛ㄧず淇敼鎴愬姛涓庝慨鏀瑰嚭閿�

2.瀹氫箟UpdateServlet绫伙紝骞堕噸鍐檚ervice鏂规硶锛屽畬鎴愪慨鏀圭敤鎴蜂笟鍔�


	2.1鑾峰彇鐢ㄦ埛鐨勮緭鍏ュ悕锛屽瘑鐮佺瓑淇℃伅
	2.2鍏堥€氳繃UserInfoDAO鏌ユ壘璇ョ敤鎴锋槸鍚﹀瓨鍦紝鑻ヤ笉瀛樺湪鐩存帴璺宠浆淇敼澶辫触椤甸潰
	2.3鑻ュ瓨鍦紝鍒欏疄渚嬪寲涓€涓猆serInfo瀵硅薄锛屽皢鐢ㄦ埛杈撳叆鐨勪慨鏀逛俊鎭缃埌璇ュ璞′腑
	2.4灏哢serInfo瀵硅薄浜ょ粰UserInfoDAO鐨剈pdate鏂规硶杩涜淇敼
	2.5璺宠浆淇敼鎴愬姛椤甸潰

3.瀹屾垚UserInfoDAO鏂规硶涓殑uodate鏂规硶
	3.1閫氳繃RandomAccessFile寰幆鎵惧埌璇ョ敤鎴凤紙鍒ゆ柇鍚嶅瓧锛�
	3.2鐒跺悗灏嗘寚閽堢Щ鍔ㄥ瘑鐮佷綅缃紝灏嗗瘑鐮侊紝鏄电О锛屾墜鏈哄彿椤哄簭鍐欏叆锛岃鐩栦互鍓嶆暟鎹畬鎴愪慨鏀瑰姛鑳�

4.鍦–lientHandler涓坊鍔犲/myweb/update璇锋眰鐨勫鐞�
瀹炰緥鍖朥pdateServlet骞惰皟鐢╯ervice鏂瑰鐞嗕慨鏀逛笟鍔�

鍗佸叚锛�
閲嶆瀯浠ｇ爜

灏嗚姹備笌瀵瑰簲Servlet鐨勫鐞嗙敱鍘熸潵鐨勭‖缂栫爜鏂瑰紡鏀逛负浣跨敤鍙嶅皠鏈哄埗鍔ㄦ€佽皟鐢�

1.娣诲姞涓€涓厤缃枃浠讹紝鏉ラ厤缃姹備笌瀵瑰簲鐨凷ervlet鐨勫悕瀛�
	conf-servlets.xml
	
2.鍦� context鍖呬腑娣诲姞ServletContext绫伙紝璇ョ被鐢ㄦ埛淇濆瓨鏈嶅姟绔墍鏈夐厤缃俊鎭�
	鍦ㄥ叾涓畾涔変竴涓狹ap鐢ㄦ潵淇濆瓨璇锋眰涓嶴ervlet鍚嶅瓧鐨勬槧灏勫叧绯�
	
3.鍦⊿ervletContext娣诲姞涓€涓垵濮嬪寲鏂规硶锛岀敤鏉ュ姞杞絚onf-Servlets.xml鏂囦欢锛屽苟瑙ｆ瀽鍑烘墍鏈夊唴瀹圭劧鍚庡瓨鍏ap涓�

4.淇敼ClientHandler锛屽埄鐢ㄥ弽灏勬満鍒跺皢璇锋眰瀵瑰簲鐨凷ervlet瀹炰緥鍖栵紝鐒跺悗璋冪敤service鏂规硶澶勭悊銆�	













鍗佷竷锛�
閲嶆瀯浠ｇ爜

灏哤ebServer涓鐞嗗鎴风璇锋眰鐨勫苟鍙戝鐞嗕氦缁欑嚎绋嬫睜瀹屾垚锛岃€屼笉鍐嶄娇鐢ㄧ洿鎺ュ垱寤虹嚎绋嬬殑鏂瑰紡銆�



鍗佸叓锛�
閲嶆瀯浠ｇ爜

1.娣诲姞涓€涓厤缃枃浠禼onf/config.xml鏂囦欢锛屽鏈嶅姟绔熀纭€淇℃伅杩涜閰嶇疆宸ヤ綔
   鍦⊿erverCOntext涓璇ユ枃浠惰繘琛屽姞杞斤紝骞舵坊鍔犲搴旂殑灞炴€ф潵淇濆瓨杩欎簺閰嶇疆鏁版嵁
   淇敼WebServer锛屼娇鐢ㄨ閰嶇疆淇℃伅鍒濆鍖栫鍙ｏ紝绾跨▼姹犱腑鐨勭嚎绋嬫暟閲�
   
2.鍦℉ttpRequest涓坊鍔犲涓枃鐨勮В鐮佸伐浣滐紝浣垮緱GET璇锋眰鎻愪氦杩囨潵鐨勬暟鎹彲浠ユ寜鐓ф寚瀹氱殑瀛楃闆嗚繘琛岃В鐮侊紝浣垮緱涓枃鍙互姝ｅ父鏄剧ず   













鍗佷節锛�

鍦℉ttpRequest涓坊鍔犲POST璇锋眰鐨勮В鏋愬伐浣�

HTTP璇锋眰甯歌鐨勪袱绉嶆柟寮忥細
GET锛氬湴鍧€鏍忎紶鍙傚舰寮�
	閫氬父鍍忔秹鍙婄敤鎴锋晱鎰熶俊鎭紝浼犻€掍腑鏂囩瓑鎯呭喌涓嶆帹鑽愪娇鐢℅ET
	
POST锛氫紶閫掔殑鏁版嵁涓嶄細浣撶幇鍦║RL涓紝鑰屾槸琚斁鍦ㄨ姹傜殑娑堟伅姝ｆ枃閮ㄥ垎浠�2杩涘埗鐨勫舰寮忎紶閫掔粰鏈嶅姟绔�
			褰撴椂浣跨敤POST璇锋眰鍙戦€佹暟鎹椂锛岃姹傜殑娑堟伅澶撮儴鍒嗕細鏈夊娑堟伅姝ｆ枃鎻忚堪鐨勫ご淇℃伅锛圕ontent-Type锛孋ontent-Length锛�	  










浜屽崄锛�

娣诲姞瀵归噸瀹氬悜鍔熻兘鐨勬敮鎸�
閲嶅畾鍚戠殑涓や釜鍏抽敭鐐瑰湪浜庢湇鍔＄鍝嶅簲瀹㈡埛绔椂鐨勭姸鎬佷唬鐮佷互鍙婁竴涓搷搴斿ご锛�
鐘舵€佷唬鐮侊細302琛ㄧず瑕佹眰瀹㈡埛绔噸鏂板彂璧疯姹傝闂粰瀹氱殑鍦板潃
鍝嶅簲澶达細Location锛岃繖涓ご灏辨槸鍛婅瘔瀹㈡埛绔祻瑙堝櫒瑕侀噸瀹氬悜鐨勫湴鍧€

涓烘锛屾垜浠淇敼HttpResponse鐨勫唴瀹癸紝灏嗗彂閫佺姸鎬佽鐨勪唬鐮佽繘琛屼慨鏀癸紝瀵逛笉鍚岀姸鎬佷唬鐮佸彂閫佽繘琛屾敮鎸�
鐒跺悗鍦℉ttpResponse涓彁渚涘閲嶅畾鍚戝姛鑳芥敮鎸佺殑鏂规硶銆�


鍦℉ttpContext涓坊鍔犱竴涓狹ap锛岀敤浜庤褰曚笉鍚岀殑鐘舵€佷唬鐮佹墍瀵瑰簲鐨勭姸鎬佹弿杩帮紝鍦ㄦ坊鍔犺嫢骞插父閲忥紝瀹氫箟鐘舵€佷唬鐮併€�
